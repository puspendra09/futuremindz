<VirtualHost *:80>
    # Set your domain name
    ServerName futuremindz.com
    ServerAlias www.futuremindz.com

    # DocumentRoot points to the React build directory
    DocumentRoot /var/www/futuremindz

    # Serve React app and handle routes
    <Directory /var/www/futuremindz>
        Options FollowSymLinks
        AllowOverride All
        Require all granted

        # Enable rewrite rules for React Router
        RewriteEngine On
        # Redirect requests to index.html except for static files
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^ /index.html [L]
    </Directory>

    # Proxy settings for Node.js server on /api/*
    ProxyPreserveHost On
    ProxyPass /api http://localhost:3001/api
    ProxyPassReverse /api http://localhost:3001/api

    # Logs
    ErrorLog ${APACHE_LOG_DIR}/futuremindz_error.log
    CustomLog ${APACHE_LOG_DIR}/futuremindz_access.log combined
</VirtualHost>